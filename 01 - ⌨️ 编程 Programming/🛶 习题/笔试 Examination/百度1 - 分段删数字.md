给定一个整型数组，选择数组中出现的任意一个数字`x`，分段删去数组的其他部分，使得数组只剩下数字`x`，选择的分段不能包含数字`x`本身。对于一个给定数组，最少需要删除几次？

输入的格式如下，第一行的数字表示数组长度，第二行的数字表示数组元素

```
7
1 2 4 1 5 6 1
```

输出最少删除次数

```
2
```

---
## 思路

本质上这题研究的是数字`x`出现的位置会将数组除`x`以外的部分分成几段。对于一个数字`x`：

+ 如果它出现在数组的首尾，并不会将数组分成两段
+ 如果它出现在数组中间，会将数组分成两段，且每出现一次就切分一次
+ 如果它连续出现，后面出现的不会切分数组，效果相当于只有第一个数字的效果

---
## 存数法

+ **复杂度** - $O(n)$ / $O(n)$

遍历一遍原数组，对于每一个数字，如果之前出现过且没有连续出现，也不是出现在第一个或者最后，切分段数+1；否则把这个数字新加到记录里，最初切分段数中间取2，首尾取1。最后在记录的数组里找出最小的切分段数。

如果用向量记录切分段数，在记录向量中找切分段数需要$O(n)$，总体时间复杂度$O(n^2)$，如果用哈希映射记录可能可以把复杂度降到$O(n)$

```C++
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

class DelInterval{

    vector<int> arr;

public:
    DelInterval(vector<int>& arr): arr(arr){}
    int leastDel() const;
};

int DelInterval::leastDel() const{

    // Only one element
    if (arr.size() == 1) return 0; 

    // Calculate number of deletion for every element
    vector<vector<int>> cnt(1, {arr[0], 1});
    int current_size = 0;
    
    for (int e = 1; e < arr.size(); e++){

        // Two same adjacent element
        if (arr[e] == arr[e-1]) continue; 

        // Record number of required delete operation for each element
        current_size = cnt.size();
        for (int c = 0; c < current_size; c++){
            cout << cnt[c][0] << " ";
            if (arr[e] == cnt[c][0]){
                if (e != arr.size()-1) cnt[c][1]++;
                break;
            }
            // No same element before
            if (c == cnt.size()-1){
                if (e == arr.size()-1) cnt.push_back({arr[e], 1});
                else cnt.push_back({arr[e], 2});
            }
        }
        cout << "\n";
    }

    // Find the least number of deletion
    int least = 100000;
    int del_num = -1;
    for (int c = 0; c < cnt.size(); c++){
        if (cnt[c][1] < least){
            least = cnt[c][1];
            del_num = cnt[c][0];
        }
    }

    cout << least;
    // cout << " " << del_num;
    return least;
}

int main(){
    
    int len = 0;
    int num_buffer = 0;
    vector<int> arr;

    // Mimic input buffer
    string test_data = "8\n1 2 3 1 5 6 1 2";
    istringstream fakeinput(test_data);
    cin.rdbuf(fakeinput.rdbuf());

    // Get array length
    cin >> len;
    // fakeinput >> len;
    
    // Get array elements
    for (int i = 0; i < len; i++){
        cin >> num_buffer;
        // fakeinput >> num_buffer;
        arr.push_back(num_buffer);
    }

    DelInterval deli(arr);
    deli.leastDel();
}
```