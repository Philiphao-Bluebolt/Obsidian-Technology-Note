Tutorials are practices that would be thoroughly discussed in the lecture.

+ [[#Tutorial 1 - Simple Noise Calculation]]
	+ [[#1-1 Thermal noise RMS voltage calculation]]
	+ [[#1-2 Sum of noises calculation]]
	+ [[#1-3 Equivalent noise bandwidth calculation]]
	+ [[#1-4 Excess and thermal noise calculation]]
+ [[#Tutorial 2 - Diode and BJT noise model]]
+ 


---
## Tutorial 1 - Simple Noise Calculation

![[EE4341 T1.pdf]]

![[T1 Guide(1).pdf]]

### 1-1  Thermal noise RMS voltage calculation

Determine the thermal noise voltage of a $50k\Omega$ resistor at room temperature of $290K$ for each of the following bandwidths: $50 kHz$, $1 MHz$, and $20 MHz$. There is no DC bias applied to the resistor. (Boltzmann's constant $k = 1.38 × 10^{‐23} J/K$)

![[Pasted image 20240904164152.png]]
The PSD of thermal noise is
$$\overline{v^2}=4kRT=8\times10^{-16}$$
Since a resistor's gain is the same for all frequencies, the given bandwidth is the equivalent noise bandwidth. So RMS voltage is 
$$V_{rms}=\sqrt{\overline{v^2}\Delta f}$$
The answer is $8.31\times 10^{-10}V$, $2.83\times 10^{-5}V$, $1.26\times 10^{-4}V$ for the three given frequencies.


### 1-2  Sum of noises calculation

For an equivalent noise bandwidth of $10 MHz$, determine the resultant RMS thermal noise voltage between points “x” and “y” shown in the graph. No DC voltage is applied to the circuit. The noises generated by the two resistors are uncorrelated. (Boltzmann's constant $k = 1.38 × 10‐23 J/K$ and $T = 300K$)

![[Pasted image 20240907210822.png]]
The uncorrelated noises of two serial resistor can be directly summed using the sum of square rule. As $x,y$ are open circuit, the noise voltage between them equals the sum of the two noise produced by resistors.
$$\overline{v^2_{xy}}=\overline{v^2_1}+\overline{v^2_2}=4kR_1T+4kR_2T$$
Then the RMS noise voltage
$$V_{rms}=\sqrt{\overline{v^2_{xy}}\Delta f}=\sqrt{4kT\Delta f(R_1+R_2)}=3.15\times 10^{-5} V=31.5\mu V$$

### 1-3  Equivalent noise bandwidth calculation

Derive the expression of the ‐3dB bandwidth and equivalent noise bandwidth of the circuit.

![[Pasted image 20240907214711.png]]
The transfer function of the network function is
$$H(j\omega)=\frac{\frac{R_2}{1+j\omega CR_2}}{R_1+\frac{R_2}{1+j\omega CR_2}}=\frac{R_2}{R_1+R_2+j\omega CR_1R_2}$$
Derive the power gain (square of intensity) of the function and use frequency $f$ instead ($\omega=2\pi f$)
$$|H(jf)|^2=\frac{|R_2|^2}{|R_1+R_2+2\pi fj CR_1R_2|^2}=\frac{(\frac{R_2}{R_1+R_2})^2}{1+(\frac{2\pi fCR_1R_2}{R_1+R_2})^2}=\frac{A_0^2}{1+(\frac{f}{f_c})^2}$$
The -3dB cutoff bandwidth is the frequency where the power gain drops to the half of mid-frequency power gain.
$$\begin{align}|H(jf_c)^2|&=\frac{|H(jf_0)^2|}{2}\\f_c&=\frac{R_1+R_2}{2\pi CR_1R_2}\end{align}$$
The equivalent noise bandwidth defines a square window on the frequency power gain bode plot which the total energy inside the square window equal to the total energy of the original power gain function.
$$\Delta f =\frac{\int_0^\infty|H(jf)|^2df}{A^2_0}=\frac{\pi}{2}f_c=\frac{R_1+R_2}{4 CR_1R_2}$$

### 1-4  Excess and thermal noise calculation

A $100 kΩ$ resistor has a noise index (NI) of $5 μV/V$. Derive a general expression for excess noise voltage over an arbitrary frequency range from $f1$ to $f2$ in terms of NI. If the DC voltage across the resistor is $5 V$, what is the total RMS noise voltage generated by this resistor between $20 Hz$ and $200 kHz$? (Boltzmann's constant $k = 1.38 × 10‐23 J/K$ and $T = 300K$)


As the NI is given, the noise analysis of resistor must include both excess noise and thermal noise. The noise power is the sum of two noises.
![[Pasted image 20240907230624.png]]
The PSD of excess noise is defined as
$$\overline{v_{e}^2}=\frac{m^2V^2}{f}=\frac{(NI)^2V^2}{f\ln10}$$
The RMS voltage of excess noise between the frequency can be calculated using integral
$$V_{f1-f2}=\sqrt{\int_{f_1}^{f_2}\frac{m^2V^2}{f}df}=\frac{NI}{\ln10}V\ln\frac{f_2}{f_1}$$
The calculation of total RMS also use an integral, it should take the thermal noise into account as well. 
$$V_{rms}=\sqrt{\int_{f_1}^{f_2}\overline{v_e^2}+\overline{v_t^2}}=\sqrt{\int_{f_1}^{f_2}\frac{(NI)^2V^2}{f\ln10}df+\int_{f_1}^{f_2}4kRTdf}=\sqrt{\frac{(NI)^2V^2}{\ln10}\ln\frac{f_2}{f_1}+4kRT(f_2-f_1)}=28.8\mu V$$


---
## Tutorial 2 - Diode and BJT noise model

![[EE4341 T2 1.pdf]]

![[T2 Guide(1).pdf]]

### 2-1  Diode circuit noise analysis

(a) Calculate the mean-squared noise-voltage spectral density in $V^2/Hz$ at $v_o$ for the circuit and then calculate the RMS noise voltage in a $100 kHz$ equivalent noise bandwidth. Neglect capacitive effects, flicker noise and series resistance in the diode.

(b) If a $1000 pF$ capacitor is now connected across the diode, including flicker noise, calculate and plot the output mean-­squared noise voltage spectral density at $v_o$ in $V^2/Hz$ on log scales from $f = 1Hz$ to $f =10 MHz$. Flicker noise spectral density $= 3 \times 10^{-16}(I_D/f) A^2/Hz$.

Assume that $V_D = 0.60V$. Boltzmann's constant $k = 1.38 \times 10^{-23}J/K$, $q = 1.6\times10^{-19} C$ and $T = 300K$.
![[Pasted image 20240908102455.png]]

First, we draw the equivalent noise circuit without the diode serial resistance and its noise.

![[Pasted image 20240908112330.png]]

The total noise PSD can be computed by the following equation, however we don't know the equivalent resistance $r_d$ and DC current $I_D$ of the diode.
$$\begin{align}\overline{v^2_o}&=(r_d\parallel R)^2(\overline{i^2_R}+\overline{i^2})\\&=(\frac{r_d R}{r_d + R})^2(\frac{4kT}{R}+2qI_D)\end{align}$$
Now calculate $I_D$ and $r_d$. As we know that the voltage drop of silicon diode $V_D=0.6V$, the DC current flowing through the circuit is
$$I_D=\frac{10V-0.6V}{20k\Omega}=0.47mA$$
The equivalent resistance $r_d$ is not fixed but is stable when the DC current is fixed
$$r_d=\frac{kT}{qI_D}=55.05\Omega$$
Now we can calculate $\overline{v^2_o}$
$$\overline{v^2_o}=4.558\times10^{-19}\quad V^2/Hz$$
The RMS noise voltage is
$$V_{rms}=\sqrt{\overline{v^2_o}\Delta f}=0.21\mu V$$

Now we consider the effect of the flicker noise and the extra capacitor.

![[Pasted image 20240908120432.png]]
The new capacitor doesn't affect the DC current of the circuit, but it change the equation of the output noise PSD
$$\begin{align}\overline{v^2_o}&=(r_d\parallel R\parallel C)^2(\overline{i^2_R}+\overline{i^2})\\&=|\frac{1}{\frac{1}{R}+\frac{1}{r_d}+j2\pi fC}|^2(\frac{4kT}{R}+2qI_D+k_1\frac{I_D^a}{f})\\&=\frac{R^3r_d^3}{2+2Rr_d+4\pi ^2C^2R^3 r_d^3f^2} (1.51\times10^{-22}+\frac{1.41\times10^{-19}}{f})\\&=\frac{6.05\times10^{11}}{1+2.38\times10^{-5}f^2}(1.51\times10^{-22}+\frac{1.41\times10^{-19}}{f})\\&=\end{align}$$

### 2-1  Diode circuit noise analysis