+ å®˜æ–¹æ–‡æ¡£ - [Humble](https://docs.ros.org/en/humble)
+ å…¶ä»–æ•™ç¨‹ - [å¤æœˆå±…ROS2](https://www.bilibili.com/video/BV16B4y1Q7jQ/)

ROS2æ˜¯ROSçš„åç»§ç‰ˆæœ¬ï¼Œä¸ºäº†è®©ROSç³»ç»Ÿé€‚åº”å·¥ä¸šç•Œçš„è¦æ±‚ï¼ŒROS2æ”¹è¿›äº†ROSåœ¨åˆ†å¸ƒå¼é€šè®¯åŠŸèƒ½æ–¹é¢çš„ç¼ºé™·ï¼Œæ›´æ¢äº†ç¼–è¯‘å·¥å…·å’Œç¼–ç¨‹APIã€‚

![[Pasted image 20250122132839.png]]

ROS2ä¸ROSä¸»è¦ä¸åŒï¼š

1. é€šè®¯æ¶æ„ï¼š`XML-RPC` --> `DDS`ï¼Œä¸å†æœ‰Master
2. å‘½ä»¤æ ¼å¼ï¼šç»Ÿä¸€ä¸º`ros2`
3. ç¼–ç¨‹æ¥å£ï¼š`roscpp` ã€`rospy` --> `rclcpp`ã€`rclpy`
4. ç¼–è¯‘å·¥å…·ï¼š`catkin` --> `colcon`

+ [[#å®‰è£…é…ç½®]]
	+ [[#ç‰ˆæœ¬é€‰æ‹©]]
	+ [[#å®‰è£…æ­¥éª¤]]
+ [[#åŸºæœ¬æ¦‚å¿µ]]
	+ [[#èŠ‚ç‚¹]]ï¼ˆNodesï¼‰
	+ [[#è¯é¢˜]]ï¼ˆTopicsï¼‰
	+ [[#æœåŠ¡]]ï¼ˆServicesï¼‰
	+ [[#å‚æ•°]]ï¼ˆParametersï¼‰
	+ [[#åŠ¨ä½œ]]ï¼ˆActionï¼‰
+ [[#ç¼–ç¨‹å¼€å‘]]
	+ [[#ROS2æºæ–‡ä»¶]]ï¼ˆSource Filesï¼‰
	+ [[#å·¥ä½œç©ºé—´]]ï¼ˆWorkspacesï¼‰
		+ [[#åˆ›å»ºå·¥ä½œç©ºé—´]]
	+ [[#åŠŸèƒ½åŒ…]]ï¼ˆPackagesï¼‰
		+ [[#åˆ›å»ºC++åŠŸèƒ½åŒ…]]
		+ [[#åˆ›å»ºPythonåŠŸèƒ½åŒ…]]
		+ [[#åˆ›å»ºåŒè¯­è¨€åŠŸèƒ½åŒ…]]
	+ [[#å®ç°èŠ‚ç‚¹]]
		+ [[#åˆ›å»ºC++èŠ‚ç‚¹]]
		+ [[#åˆ›å»ºPythonèŠ‚ç‚¹]]
+ [[#é…å¥—å·¥å…·]]
	+ [[#Bag]] - æ¶ˆæ¯å½•åˆ¶
	+ [[#TF]] - åæ ‡å˜æ¢
	+ [[#Rqt]] - å¤šåŠŸèƒ½å›¾å½¢åŒ–é¢æ¿
	+ [[#Rviz]] - æ•°æ®3Då¯è§†åŒ–
	+ [[#Gazebo]]- ä»¿çœŸå™¨
	+ [[#PlotJuggler]] - æ•°æ®ç»˜å›¾åˆ†æ
+ [[#å®é™…æ¡ˆä¾‹]]
	+ [[#Turtlesim]]

---
## å®‰è£…é…ç½®

+ å‘è¡Œç‰ˆåˆ—è¡¨ - [Distributions](https://docs.ros.org/en/humble/Releases.html)

ROS2ä¸Ubuntuç±»ä¼¼ï¼Œæ¯ä¸¤å¹´å‘å¸ƒä¸€ä¸ªLTSé•¿æœŸæ”¯æŒç‰ˆï¼ˆç»´æŠ¤5å¹´ï¼‰ï¼Œæ¯ä¸€ä¸ªROSç‰ˆæœ¬éƒ½ä¸ä¸€ä¸ªUbuntuå‘è¡Œç‰ˆä¸€ä¸€å¯¹åº”

### ç‰ˆæœ¬é€‰æ‹©

ç”±äºROS2æ¯ä¸ªç‰ˆæœ¬ä¹‹é—´çš„åŸºç¡€åŠŸèƒ½åŸºæœ¬ç›¸åŒä¸”ä¸æå€¡è·¨ç‰ˆæœ¬ä½¿ç”¨ï¼Œé€‰ç”¨ç‰ˆæœ¬æ—¶ä¸»è¦è€ƒè™‘é¡¹ç›®éœ€è¦ç”¨åˆ°çš„åº“å’Œæ¥å£çš„å…¼å®¹æ€§ã€‚

æœ€æ–°ç‰ˆæœ¬è™½ç„¶æ”¯æŒæ—¶é—´æœ€é•¿ï¼Œä½†ç¤¾åŒºæ•™ç¨‹è¾ƒå°‘ï¼Œä¼ æ„Ÿå™¨ã€ä»¿çœŸå™¨ç­‰å¤–è®¾è½¯ç¡¬ä»¶çš„æ¥å£ä¹Ÿæ²¡æœ‰ç«‹åˆ»è·Ÿè¿›ï¼Œå› æ­¤ä¸€èˆ¬é€‰ç”¨**æœ€æ–°ç‰ˆæœ¬çš„ä¸Šä¸€ä¸ªé•¿æœŸç¨³å®šç‰ˆ**

+ [Jazzy](https://docs.ros.org/en/jazzy/Installation.html)ï¼ˆUbuntu 24.04ï¼‰- æœ€æ–°
+ [Humble](https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html)ï¼ˆUbuntu 22.04ï¼‰- æœ€å¸¸ç”¨

### å®‰è£…æ­¥éª¤

ROS2é€šè¿‡Ubuntuå‘½ä»¤è¡Œå®‰è£…ï¼Œæ‰€æœ‰ç‰ˆæœ¬çš„å®‰è£…æ­¥éª¤éƒ½å¯ä»¥å½’ç»“ä¸ºä¸‹é¢ä¸‰éƒ¨ï¼šè®¾ç½®ROSä¸‹è½½æº --> aptä¸‹è½½ --> é…ç½®ç¯å¢ƒå˜é‡

+ **ROS2 Humble å®‰è£…å‘½ä»¤**

```bash
# åŠ è½½Ubuntuå…¨å±€è½¯ä»¶åŒ…
sudo apt install software-properties-common
sudo add-apt-repository universe

# æ·»åŠ ROS2ä¸‹è½½æº
sudo apt update && sudo apt install curl -y

sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null

# æ›´æ–°ä¸‹è½½æº
sudo apt update
sudo apt upgrade

# å®‰è£…ROS2
sudo apt install ros-humble-desktop
sudo apt install ros-humble-ros-base
sudo apt install ros-dev-tools

# é…ç½®ç¯å¢ƒå˜é‡
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
```


---
## åŸºæœ¬æ¦‚å¿µ

åŸºäºROS2çš„æœºå™¨äººç³»ç»Ÿæ˜¯ä¸€ä¸ªç”±å¾ˆå¤šèŠ‚ç‚¹ç»„æˆçš„å›¾ï¼ˆGraphï¼‰ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡æ¶ˆæ¯ä¸æœåŠ¡å»ºç«‹é€šè®¯ï¼Œä¼ é€’ä¼ æ„Ÿå™¨æ•°æ®ã€æ§åˆ¶å‘½ä»¤ç­‰æ•°æ®æµã€‚

ROS2çš„åŸºæœ¬æ¦‚å¿µä¸ROSç›¸ä¼¼ï¼Œåªæ˜¯èŠ‚ç‚¹çš„æ³¨å†Œä¸è¿æ¥ä¸å†éœ€è¦å¯åŠ¨Masterï¼Œåªè¦ç³»ç»Ÿä¸­é…ç½®å¥½ROS2ï¼ŒèŠ‚ç‚¹ä¹‹é—´éšæ—¶å¯ä»¥äº’ç›¸å»ºç«‹é€šè®¯è¿æ¥ã€‚

![[Pasted image 20250122160431.png]]

### èŠ‚ç‚¹

èŠ‚ç‚¹ï¼ˆNodeï¼‰æ˜¯ROS2ç³»ç»Ÿçš„è¿è¡Œå•å…ƒï¼Œä½¿ç”¨ROS2æä¾›çš„C++æˆ–Python APIç¼–ç¨‹å®ç°ã€‚èŠ‚ç‚¹å†…éƒ¨å¯ä»¥è¿è¡Œå…¶ä»–ç®—æ³•ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡åˆ™é€šè¿‡è¯é¢˜å’ŒæœåŠ¡å®ç°ã€‚ROS2è‡ªå¸¦çš„`rqt_graph`å·¥å…·å¯ç”¨äºæŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„èŠ‚ç‚¹å›¾ã€‚

```bash
rqt_graph
```

![[Screenshot from 2025-01-23 14-12-33.png]]

ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªåŸºäºè§†è§‰çš„æ— äººæœºé¿éšœæ§åˆ¶ç³»ç»Ÿå¦‚æœç”¨ROSå®ç°ï¼Œå¯èƒ½ä¼šæœ‰ä¸‹é¢å‡ ä¸ªèŠ‚ç‚¹ã€‚è¦æ³¨æ„èŠ‚ç‚¹çš„ä»»åŠ¡åˆ’åˆ†å¹¶ä¸æ˜¯å”¯ä¸€çš„

+ **ä¼ æ„Ÿå™¨**èŠ‚ç‚¹é€šå¸¸ç”±å‚å®¶æä¾›ï¼Œå°†ä¼ æ„Ÿå™¨çš„æµ‹é‡æ•°æ®ä»ä¸²å£æˆ–å±€åŸŸç½‘ä»¥ROSæ¶ˆæ¯çš„æ ¼å¼è¾“å‡º
+ **ç‚¹äº‘å¤„ç†**èŠ‚ç‚¹å°†ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°çš„å›¾åƒè½¬æ¢ä¸º3Dç‚¹äº‘
+ **å»ºå›¾**èŠ‚ç‚¹å°†ç‚¹äº‘æ•°æ®è½¬æ¢ä¸ºéšœç¢ç‰©åœ°å›¾
+ **è·¯å¾„è§„åˆ’**èŠ‚ç‚¹è®¡ç®—æ— äººæœºçš„é¿éšœè½¨è¿¹
+ **å¯¼èˆª**èŠ‚ç‚¹è®¡ç®—æ— äººæœºéœ€è¦æ‰§è¡Œçš„åŠ¨ä½œ
+ **æ§åˆ¶å‘½ä»¤**èŠ‚ç‚¹å°†æ§åˆ¶åŠ¨ä½œè½¬æ¢ä¸ºMavlinkæ ¼å¼çš„å‘½ä»¤ä¼ è¾“ç»™é£æ§

### è¯é¢˜

è¯é¢˜ï¼ˆTopicï¼‰æ˜¯èŠ‚ç‚¹ä¹‹é—´çš„å¼‚æ­¥é€šè®¯æ–¹å¼ï¼Œå…¶è¿è¡ŒåŸç†åŸºäºå‘å¸ƒ-è®¢é˜…æ¨¡å‹ï¼ˆPublish-subscribe Patternï¼‰ï¼ŒèŠ‚ç‚¹å¯ä»¥å‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šçš„è¯é¢˜ï¼Œä¹Ÿå¯ä»¥ä»æŒ‡å®šçš„è¯é¢˜è¯»å–æ¶ˆæ¯ã€‚

æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯è¯é¢˜ä½¿ç”¨çš„æ•°æ®ä¼ è¾“æ ¼å¼ï¼Œ

### æœåŠ¡


### å‚æ•°


### åŠ¨ä½œ


---
## ç¼–ç¨‹å¼€å‘

ä¸ROSç›¸æ¯”ï¼ŒROS2å¯¹ç¼–è¯‘å·¥å…·å’Œç¼–ç¨‹æ¥å£è¿›è¡Œäº†è¾ƒå¤§æ”¹å˜ï¼Œç¼–è¯‘å·¥å…·`catkin`è¢«`colcon`æ›¿ä»£ï¼ŒC++ä¸Pythonçš„æ¥å£`roscpp`å’Œ`rospy`ä¹Ÿåˆ†åˆ«è¢«`rclcpp`å’Œ`rclpy`æ›¿ä»£

### ROS2æºæ–‡ä»¶


### å·¥ä½œç©ºé—´

å·¥ä½œç©ºé—´ç”±ç”¨æˆ·è‡ªå·±åˆ›å»ºï¼Œæ˜¯å­˜æ”¾ã€ç¼–è¯‘è‡ªå®šä¹‰åŠŸèƒ½åŒ…çš„ç›®å½•ï¼Œå…¶è·¯å¾„ä¸€èˆ¬ä½äºHomeæ–‡ä»¶å¤¹ä¸­ï¼Œå®Œæˆåˆå§‹åŒ–çš„å·¥ä½œç©ºé—´æ–‡ä»¶ç»“æ„å¦‚ä¸‹

+ ğŸ“ `xxx_ws`
	+ ğŸ“ `build` - ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶
	+ ğŸ“ `install` - 
	+ ğŸ“ `log` - æ—¥å¿—
	+ ğŸ“ `src`- **å­˜æ”¾åŠŸèƒ½åŒ…**

#### åˆ›å»ºå·¥ä½œç©ºé—´

1. æ–°å»ºå·¥ä½œç©ºé—´æ–‡ä»¶å¤¹ï¼ŒæŒ‰æƒ¯ä¾‹å‘½ä»¤ä¸º`xxx_ws`

```bash
mkdir -p ~/xxx_ws/src
```

2. åˆå§‹åŒ–ï¼šç”Ÿæˆ`build`ã€`install`ç­‰ç›®å½•ï¼Œé…ç½®ç¯å¢ƒå˜é‡

```bash
cd ~/xxx_ws
colcon test
echo "source ~/xxx_ws/install/setup.bash" >> ~/.bashrc
```

### åŠŸèƒ½åŒ…

åŠŸèƒ½åŒ…æ˜¯ROS2ç³»ç»Ÿä¸­å°è£…å¥½çš„åº“ï¼ŒåŠŸèƒ½åŒ…çš„ç›®å½•åŒ…å«èŠ‚ç‚¹æºç ã€å¯åŠ¨è„šæœ¬ã€è‡ªå®šä¹‰çš„æ¶ˆæ¯å’ŒæœåŠ¡ç±»å‹ã€‚

+ ROS2å®‰è£…çš„åŠŸèƒ½åŒ…ï¼šå­˜æ”¾åœ¨ROS2çš„æºæ–‡ä»¶è·¯å¾„
+ ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„åŠŸèƒ½åŒ…ï¼šå­˜æ”¾åœ¨æŸä¸€å·¥ä½œç©ºé—´çš„`src`æ–‡ä»¶å¤¹ä¸­

ä¸ä¸€ä»£ROSä¸åŒï¼ŒROS2åˆ›å»ºåŠŸèƒ½åŒ…æ—¶éœ€è¦æŒ‡å®šåŒ…å†…ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚è‹¥æƒ³åˆ›å»ºåŒæ—¶æ”¯æŒPythonå’ŒC++çš„åŠŸèƒ½åŒ…åˆ™éœ€è¦é¢å¤–é…ç½®ã€‚

ROS2åˆ›å»ºåŠŸèƒ½åŒ…çš„å‘½ä»¤æ˜¯`ros2 pkg create`

#### åˆ›å»ºC++åŠŸèƒ½åŒ…

```bash
cd ~/xxx_ws/src
ros2 pkg create --build-type ament_cmake my_cpp_package
```

C++åŠŸèƒ½åŒ…çš„é»˜è®¤æ–‡ä»¶ç»“æ„å¦‚ä¸‹

+ ğŸ“ `my_cpp_package`
	+ ğŸ“ `include` - å­˜æ”¾ä¾èµ–é¡¹æ–‡ä»¶
		+ ğŸ“ `my_cpp_package`
	+ ğŸ“ `src` - **å­˜æ”¾C++æºç æ–‡ä»¶**
	+ ğŸ“„ `CMakeLists.txt` - **ç¼–è¯‘é…ç½®**
	+ ğŸ“„ `package.xml` - è½¯ä»¶åŒ…åŸºæœ¬ä¿¡æ¯

#### åˆ›å»ºPythonåŠŸèƒ½åŒ…

```bash
cd ~/xxx_ws/src
ros2 pkg create --build-type ament_python my_py_package
```

PythonåŠŸèƒ½åŒ…çš„é»˜è®¤æ–‡ä»¶ç»“æ„å¦‚ä¸‹

+ ğŸ“ `my_py_package`
	+ ğŸ“ `resource`
		+ ğŸ“„ `my_py_package`
	+ ğŸ“ `test`
		+ ğŸ“œ `test_copyright.py`
		+ ğŸ“œ `test_flake8.py
		+ ğŸ“œ `test_pep267.py
	+ ğŸ“ `my_py_package` - **å­˜æ”¾Pythonæºç æ–‡ä»¶**
	+ ğŸ“„ `package.xml` - è½¯ä»¶åŒ…åŸºæœ¬ä¿¡æ¯
	+ ğŸ“„ `setup.cfg` - 
	+ ğŸ“œ `setup.py` - 

#### åˆ›å»ºåŒè¯­è¨€åŠŸèƒ½åŒ…




### å®ç°èŠ‚ç‚¹

èŠ‚ç‚¹æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨C++æˆ–Pythonç¼–å†™çš„ç¨‹åº


#### åˆ›å»ºC++èŠ‚ç‚¹




#### åˆ›å»ºPythonèŠ‚ç‚¹





---
## é…å¥—å·¥å…·


### Bag


### TF


### Rqt


### Rviz


### Gazebo


### PlotJuggler



---
## å®é™…æ¡ˆä¾‹

### Turtlesim

